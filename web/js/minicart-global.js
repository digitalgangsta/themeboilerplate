define(["jquery"],function(i){"use strict";return i.widget("brm.minicartGlobal",{options:{miniCart:"[data-block='minicart']",wasActive:!1},_create:function(){this._miniCartInit()},_miniCartInit:function(){var t=this,a=i("[data-block='minicart']");a.on("dropdowndialogopen",function(){t._miniCartDropDownDialogOpend()}),a.on("click",'[data-action="close"]',function(o){o.stopPropagation(),t._closeMiniCart(a)}),i("#header-cart-over").on("click",function(o){o.stopPropagation(),t._closeMiniCart(a)}),a.on("contentLoading",function(){t._miniCartContentLoaded(a)})},_closeMiniCart:function(o){var t=parseInt(i("html").css("top"),10);o.find('[data-role="dropdownDialog"]').dropdownDialog("close"),i("html").removeClass("noscroll").scrollTop(-t),i("#header-cart-over").removeClass("active"),i(".showcart").removeClass("active"),this.options.wasActive=!1},_miniCartContentUpdated:function(o){var t;o.hasClass("active")&&(this.options.wasActive=!0),this.options.wasActive||(o.find('[data-role="dropdownDialog"]').dropdownDialog("open"),t=i("html").scrollTop()?i("html").scrollTop():i("body").scrollTop(),i("html").addClass("noscroll").css("top",-t),i("#header-cart-over").addClass("active"),i(".showcart").addClass("active"))},_miniCartContentLoaded:function(o){var t=this;o.on("contentUpdated",function(){t._miniCartContentUpdated(o)})},_miniCartDropDownDialogOpend:function(){var o=i("html").scrollTop()?i("html").scrollTop():i("body").scrollTop();i("html").addClass("noscroll").css("top",-o),i("#header-cart-over").addClass("active"),i(".showcart").addClass("active"),i(".header-controls li.active .controls").trigger("click")}}),i.brm.minicartGlobal});