define(["jquery","Magento_Checkout/js/action/get-totals","Magento_Customer/js/customer-data","jquery-ui-modules/widget"],function(i,u,l){"use strict";return i.widget("brm.cartGlobal",{options:{inputQtyClass:".qty input"},_create:function(){var e=this;i(e.options.inputQtyClass).each(function(t,a){i(a).parents(".form-cart").length&&e._addButtonsToQtyInput(a)})},_addButtonsToQtyInput:function(a){var t,e=this;i(a).parent().hasClass("quantity-wrap")||(t=i(a).siblings(".label"),i(a).wrap('<div class="quantity-wrap"></div>').after('<button class="action increaseQty"><span class="qty-controler plus input-number-increment"></span></button>').before('<button class="action decreaseQty"><span class="qty-controler minus input-number-decrement"></span></button>'),i(a).parent().prepend(t),console.log(i(a)),i(a).siblings(".action.increaseQty").on("click",function(t){t.stopPropagation(),t.preventDefault(),e._increaseItemQty(i(a))}),i(a).siblings(".action.decreaseQty").on("click",function(t){t.stopPropagation(),t.preventDefault(),e._decreaseItemQty(i(a))}))},_increaseItemQty:function(t){var a=t.data("cart-item"),e=parseFloat(i("#cart-"+a+"-qty").val());i("#cart-"+a+"-qty").val(e+1).change(),this._ajaxSubmit(i(".form-cart"))},_decreaseItemQty:function(t){var a=t.data("cart-item"),e=parseFloat(i("#cart-"+a+"-qty").val());1<e&&(i("#cart-"+a+"-qty").val(e-1).change(),this._ajaxSubmit(i(".form-cart")))},_ajaxSubmit:function(t){var a,e,n,r,o,s=this,c=i(t).attr("action");i(".cart-loader").fadeIn(),i.ajax({type:"POST",url:c,loader:!0,data:i(t).serialize(),success:function(t){a=i.parseHTML(t),e=i(a).find("#form-validate"),n=["cart"],i("#form-validate").replaceWith(e),l.reload(n,!0),r=i.Deferred(),u([],r),i(s.options.inputQtyClass).each(function(t,a){i(a).parents(".form-cart").length&&s._addButtonsToQtyInput(a)}),i(".cart-loader").fadeOut()},error:function(t,a,e){o=Function('"use strict";return ('+t.responseText+")")(),console.log(o.Message),console.log(a),console.log(e)}})}}),i.brm.cartGlobal});